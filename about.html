/**
         * CONFIGURAZIONE CENTRALIZZATA
         */
        const CONFIG = {
            email: 'biasattig@libero.it',
            notificationDuration: 1500,
            counterNamespace: 'gianluca-biasatti-photography',
            counterKey: 'about-visits',
            counterApiUrl: 'https://api.countapi.xyz'
        };

        /**
         * UTILITY - Gestione email
         */
        function handleEmailCopy(e) {
            e.preventDefault();
            
            navigator.clipboard.writeText(CONFIG.email)
                .then(() => showNotification())
                .catch(() => emailCopyFallback());
        }

        /**
         * Fallback per browser vecchi
         */
        function emailCopyFallback() {
            const textarea = document.createElement('textarea');
            textarea.value = CONFIG.email;
            textarea.style.position = 'fixed';
            textarea.style.left = '-999999px';
            document.body.appendChild(textarea);
            textarea.select();
            
            try {
                document.execCommand('copy');
                showNotification();
            } catch (err) {
                console.error('Errore copia email:', err);
            } finally {
                document.body.removeChild(textarea);
            }
        }

        /**
         * Mostra notifica
         */
        function showNotification() {
            const notify = document.getElementById('copyNotify');
            notify.classList.add('show');
            setTimeout(() => notify.classList.remove('show'), CONFIG.notificationDuration);
        }

        /**
         * VISITOR COUNTER GLOBALE (CountAPI)
         */
        async function initVisitorCounter() {
            const countElement = document.getElementById('visitorCount');
            
            try {
                // Incrementa e ottieni il counter globale
                const response = await fetch(
                    `${CONFIG.counterApiUrl}/hit/${CONFIG.counterNamespace}/${CONFIG.counterKey}`
                );
                
                if (!response.ok) throw new Error('CountAPI non disponibile');
                
                const data = await response.json();
                countElement.textContent = data.value.toLocaleString('it-IT');
                
            } catch (err) {
                console.warn('Counter globale non disponibile:', err);
                countElement.textContent = '---';
            }
        }

        /**
         * RESET COUNTER (solo per admin)
         */
        async function resetCounter() {
            try {
                const response = await fetch(
                    `${CONFIG.counterApiUrl}/set/${CONFIG.counterNamespace}/${CONFIG.counterKey}?value=0`
                );
                
                if (!response.ok) throw new Error('Reset fallito');
                
                const data = await response.json();
                document.getElementById('visitorCount').textContent = '0';
                return true;
                
            } catch (err) {
                console.error('Errore reset counter:', err);
                alert('Errore durante il reset del counter');
                return false;
            }
        }

        /**
         * PROMPT PASSWORD PER RESET
         */
        async function promptResetCounter() {
            const password = prompt('Inserisci password:');
            if (password === 'marcogianluca') {
                const success = await resetCounter();
                if (success) alert('Counter azzerato!');
            } else if (password !== null) {
                alert('Password errata!');
            }
        }

        /**
         * INIT - Al caricamento documento
         */
        document.addEventListener('DOMContentLoaded', () => {
            initVisitorCounter();
        });
